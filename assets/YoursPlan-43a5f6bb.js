import{u as O,r as l,o as Y,a as J,b as r,d as v,e as o,i as P,F as x,f as B,n as _,j as M,w as T,h as p,t as A}from"./index-42588570.js";import{P as E}from"./ProgressWrapper-6bdadf25.js";import{_ as F}from"./_plugin-vue_export-helper-c27b6911.js";const $={class:"yours-plan"},L={key:0,class:"confirm-dialog"},q={class:"goals-list"},V={key:0,class:"empty-state"},j=["onClick"],z=["onClick"],R=["onClick"],U={__name:"YoursPlan",setup(W){const f=O(),y=l(!1),n=l([]),c=l(null),d=l(!1),i=l(null),u=l(new Set),k=()=>{localStorage.setItem("goals",JSON.stringify(n.value))},h=()=>{const e=localStorage.getItem("goals");e&&(n.value=JSON.parse(e).sort((s,t)=>t.id-s.id))},C=e=>{c.value=c.value===e?null:e},S=e=>{i.value=e,d.value=!0},b=()=>{i.value!==null&&(n.value=n.value.filter(e=>e.id!==i.value),k(),d.value=!1,i.value=null)},D=()=>{d.value=!1,i.value=null},I=e=>{localStorage.setItem("editingGoal",JSON.stringify(e)),f.push({path:"/addmy",query:{mode:"edit",id:e.id}})},N=async()=>{console.log("Attempting to navigate..."),y.value=!0;try{await f.push("/addmy")}catch(e){console.error("Navigation error:",e)}finally{y.value=!1}},g=e=>{const s=document.querySelectorAll(".progress-wrapper");let t=!1;s.forEach(a=>{a.contains(e.target)&&(t=!0)}),t||(c.value=null)},w=()=>{const e=localStorage.getItem("myDaysItems")||"[]",s=JSON.parse(e);u.value=new Set(s.map(t=>t.id))},m=e=>u.value.has(e.id),G=e=>{const s=localStorage.getItem("myDaysItems")||"[]";let t=JSON.parse(s);m(e)?(t=t.filter(a=>a.id!==e.id),u.value.delete(e.id)):(t.push({...e,addedFromYours:!0}),u.value.add(e.id)),localStorage.setItem("myDaysItems",JSON.stringify(t))};return Y(()=>{h(),w(),document.addEventListener("click",g)}),J(()=>{document.removeEventListener("click",g)}),(e,s)=>(r(),v("div",$,[s[2]||(s[2]=o("h1",null,"Your Big Days",-1)),d.value?(r(),v("div",L,[o("div",{class:"dialog-content"},[s[0]||(s[0]=o("p",null,"确定要删除这个任务吗？",-1)),o("div",{class:"dialog-buttons"},[o("button",{onClick:b},"确定"),o("button",{onClick:D},"取消")])])])):P("",!0),o("div",q,[n.value.length===0?(r(),v("div",V," 👏🏻 快来添加你的大日子 ")):(r(!0),v(x,{key:1},B(n.value,t=>(r(),M(E,{key:t.id,item:{...t,addedFromYours:m(t),fromYoursPlan:!0},"is-active":c.value===t.id,onToggle:a=>C(t.id)},{actions:T(()=>[o("button",{class:_(["action-btn",m(t)?"remove-from-mydays-btn":"add-to-mydays-btn"]),onClick:p(a=>G(t),["stop"])},A(m(t)?"取消添加":"添加好日子"),11,j),o("button",{class:"action-btn edit-btn",onClick:p(a=>I(t),["stop"])}," 编辑 ",8,z),o("button",{class:"action-btn delete-btn",onClick:p(a=>S(t.id),["stop"])}," 删除 ",8,R)]),_:2},1032,["item","is-active","onToggle"]))),128))]),o("div",{class:_(["add-button",{loading:y.value}]),onClick:N},s[1]||(s[1]=[o("span",{class:"plus-icon"},"+",-1)]),2)]))}},X=F(U,[["__scopeId","data-v-8d5e574c"]]);export{X as default};
